package upstash

import (
	"fmt"
	"os"

	"github.com/upstash/vector-go"
)

func upstashExample() {
	index, err := vector.NewIndexFromEnv()

	err := index.Upsert(vector.Upsert{
		Id:   "id-0",
		Data: "Enter data as string",
	})

	if err != nil {
		fmt.Printf("\n{s}\n", err)
		os.Exit(1)
	}

	scores, err := index.Query(vector.Query{
		//Data:            "Enter data as string", //Data is used in official example, but does not build
		TopK:            2,
		IncludeVectors:  false,
		IncludeMetadata: true,
	})

	if err != nil {
		fmt.Printf("\n%s\n", err)
		os.Exit(1)
	}

	fmt.Printf("\n%v\n", scores)
}
